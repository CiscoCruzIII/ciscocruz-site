<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment 13 – Memory Matching Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        h1 {
            text-align: center;
            margin-bottom: 0.5rem;
        }
        p.instructions {
            max-width: 600px;
            margin: 0 auto 20px;
            text-align: center;
            line-height: 1.6;
        }
        .scoreboard {
            max-width: 600px;
            margin: 0 auto 20px;
            display: flex;
            justify-content: space-around;
            font-size: 1.1rem;
        }
        #gameBoard {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-gap: 10px;
            max-width: 600px;
            margin: 0 auto;
        }
        .card {
            width: 100%;
            padding-top: 75%; /* maintain 4:3 aspect ratio */
            position: relative;
            background-color: #0074D9;
            border-radius: 8px;
            cursor: pointer;
            user-select: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            color: #fff;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
        }
        .card.flipped {
            background-color: #FFDC00;
            color: #333;
            transform: rotateY(180deg);
        }
        .card.matched {
            background-color: #2ECC40;
            color: #fff;
            cursor: default;
        }
        .message {
            text-align: center;
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: bold;
        }
        button.reset-btn {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            font-size: 1rem;
            background-color: #0074D9;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button.reset-btn:hover {
            background-color: #0058a3;
        }
    </style>
</head>
<body>
    <h1>Assignment 13 – Memory Matching Game</h1>
    <p class="instructions">
        Flip the cards and try to find all the matching pairs. Each card represents an abbreviation of a popular content management system (CMS).<br>
        The goal is to match all pairs with the fewest moves possible. Each time you flip two cards, your move counter increases by one. Good luck!
    </p>
    <div class="scoreboard">
        <div>Moves: <span id="moveCount">0</span></div>
        <div>Pairs Found: <span id="pairsFound">0</span>/6</div>
    </div>
    <div id="gameBoard"></div>
    <div class="message" id="message"></div>
    <button class="reset-btn" id="resetBtn">Reset Game</button>
    <script>
        // Game data: pairs of abbreviations representing CMS names
        const cardValues = [
            'WP', 'WP', // WordPress
            'DR', 'DR', // Drupal
            'JM', 'JM', // Joomla
            'GH', 'GH', // Ghost
            'WX', 'WX', // Wix
            'MD', 'MD'  // Made-up pair for balancing grid (e.g. Markdown, a nod to this course)
        ];

        let firstCard = null;
        let secondCard = null;
        let lockBoard = false;
        let moves = 0;
        let pairs = 0;

        const moveCountEl = document.getElementById('moveCount');
        const pairsFoundEl = document.getElementById('pairsFound');
        const gameBoard = document.getElementById('gameBoard');
        const messageEl = document.getElementById('message');
        const resetBtn = document.getElementById('resetBtn');

        // Fisher-Yates shuffle
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function createBoard() {
            gameBoard.innerHTML = '';
            moves = 0;
            pairs = 0;
            firstCard = null;
            secondCard = null;
            lockBoard = false;
            moveCountEl.textContent = moves;
            pairsFoundEl.textContent = pairs;
            messageEl.textContent = '';
            const shuffled = [...cardValues];
            shuffle(shuffled);
            shuffled.forEach(value => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.value = value;
                card.addEventListener('click', handleCardClick);
                card.innerHTML = '<span style="display:none;">' + value + '</span>';
                gameBoard.appendChild(card);
            });
        }

        function handleCardClick(e) {
            const card = e.currentTarget;
            if (lockBoard || card.classList.contains('flipped') || card.classList.contains('matched')) {
                return;
            }
            // Flip the card
            flipCard(card);
            if (!firstCard) {
                firstCard = card;
                return;
            }
            secondCard = card;
            moves++;
            moveCountEl.textContent = moves;
            checkForMatch();
        }

        function flipCard(card) {
            card.classList.add('flipped');
            const span = card.querySelector('span');
            span.style.display = 'block';
        }
        function unflipCard(card) {
            card.classList.remove('flipped');
            const span = card.querySelector('span');
            span.style.display = 'none';
        }
        function checkForMatch() {
            const isMatch = firstCard.dataset.value === secondCard.dataset.value;
            if (isMatch) {
                disableCards();
                pairs++;
                pairsFoundEl.textContent = pairs;
                if (pairs === cardValues.length / 2) {
                    messageEl.textContent = 'Congratulations! You matched all pairs in ' + moves + ' moves.';
                }
                resetSelections();
            } else {
                // Not a match: flip back after a short delay
                lockBoard = true;
                setTimeout(() => {
                    unflipCard(firstCard);
                    unflipCard(secondCard);
                    resetSelections();
                    lockBoard = false;
                }, 1000);
            }
        }
        function disableCards() {
            firstCard.classList.add('matched');
            secondCard.classList.add('matched');
        }
        function resetSelections() {
            firstCard = null;
            secondCard = null;
        }

        // Reset button
        resetBtn.addEventListener('click', createBoard);

        // Initialize the game
        createBoard();
    </script>
</body>
</html>